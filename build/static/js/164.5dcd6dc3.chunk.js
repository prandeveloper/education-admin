(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[164],{2104:function(e,t,a){"use strict";a.r(t),a.d(t,"EditCourse",(function(){return D}));var n=a(76),l=a.n(n),c=a(127),o=a(836),r=a(41),s=a(13),i=a(14),d=a(16),u=a(15),m=a(0),p=a.n(m),h=a(1120),g=a(1118),E=a(1119),f=a(182),y=a(1123),b=a(798),v=a(800),_=a(796),C=a(794),S=a(780),N=a(951),k=a(956),H=a(1440),T=a.n(H),j=(a(1053),a(932),a(21)),w=a(177),F=a(850),O=a.n(F),D=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).onEditorStateChange=function(e){n.setState({editorState:e,long_desc:T()(Object(N.convertToRaw)(e.getCurrentContent()))}),console.log(n.state.long_desc)},n.onChangeHandler=function(e){n.setState({selectedFile:e.target.files[0]}),n.setState({selectedName:e.target.files[0].name}),console.log(e.target.files[0])},n.changeHandler=function(e){n.setState(Object(r.a)({},e.target.name,e.target.value))},n.submitHandler=function(e){e.preventDefault();var t=new FormData;t.append("course_title",n.state.course_title),t.append("desc",n.state.desc),t.append("long_desc",n.state.long_desc),t.append("teacher",n.state.teacher),t.append("category_id",n.state.category_id),null!==n.state.selectedFile&&t.append("course_image",n.state.selectedFile,n.state.selectedName);var a,l=Object(o.a)(t.keys());try{for(l.s();!(a=l.n()).done;){var c=a.value;console.log(c)}}catch(u){l.e(u)}finally{l.f()}var r,s=Object(o.a)(t.values());try{for(s.s();!(r=s.n()).done;){var i=r.value;console.log(i)}}catch(u){s.e(u)}finally{s.f()}var d=n.props.ma.params.id;w.a.post("/updatecourse/".concat(d),t).then((function(e){console.log(e),O()("Success!","Submitted SuccessFull!","success")})).catch((function(e){console.log(e.response),O()("Error!","Error Received","error")})),n.state.editorState.getCurrentContent().getPlainText()},n.state={course_title:"",desc:"",long_desc:"",teacher:"",course_type:"",category_id:"",course_image:"",editorState:N.EditorState.createEmpty(),selectedFile:null,selectedName:"",teacherL:[],categ:[]},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w.a.get("/approved_staff").then((function(e){console.log(e),a.setState({teacherL:e.data.data})})).catch((function(e){console.log(e)})),w.a.get("/allCat").then((function(e){console.log(e),a.setState({categ:e.data.data})})).catch((function(e){console.log(e)})),t=this.props.match.params.id,w.a.get("/viewonecoursep/".concat(t)).then((function(e){console.log(e.data.data),a.setState({course_title:e.data.data.course_title,desc:e.data.data.desc,long_desc:e.data.data.long_desc,course_type:e.data.data.course_type,course_image:e.data.data.course_image})})).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e;return p.a.createElement("div",null,p.a.createElement(h.a,null,p.a.createElement(g.a,{className:"m-2"},p.a.createElement(E.a,null,p.a.createElement("h1",{"col-sm-6":!0,className:"float-left"},"Edit Course")),p.a.createElement(E.a,null,p.a.createElement(f.a,{className:" btn btn-danger float-right",onClick:function(){return j.a.push("/app/course/courseList")}},"Back"))),p.a.createElement(y.a,null,p.a.createElement(b.a,{className:"m-1",onSubmit:this.submitHandler},p.a.createElement(g.a,{className:"mb-2"},p.a.createElement(E.a,{lg:"6",md:"6"},p.a.createElement(v.a,null,p.a.createElement(_.a,null,"Course Title"),p.a.createElement(C.a,{type:"text",placeholder:"Course Name",name:"course_title",value:this.state.course_title,onChange:this.changeHandler}))),p.a.createElement(E.a,{lg:"6",md:"6"},p.a.createElement(v.a,null,p.a.createElement(_.a,null,"Teacher Name"),p.a.createElement(S.a,{type:"select",placeholder:"Teacher",name:"teacher",value:this.state.teacher,onChange:this.changeHandler},p.a.createElement("option",null,"Select Teacher...."),null===(e=this.state.teacherL)||void 0===e?void 0:e.map((function(e){return p.a.createElement("option",{key:e._id,value:e._id},e.fullname)}))))),p.a.createElement(E.a,{lg:"6",md:"6"},p.a.createElement(v.a,null,p.a.createElement(_.a,null,"Course Type"),p.a.createElement(S.a,{type:"select",name:"course_type",value:this.state.course_type,onChange:this.changeHandler},p.a.createElement("option",null,"Select Course Type..."),p.a.createElement("option",null,"PAID"),p.a.createElement("option",null,"FREE")))),p.a.createElement(E.a,{lg:"6",md:"6"},p.a.createElement(v.a,null,p.a.createElement(_.a,null,"Category"),p.a.createElement(S.a,{type:"select",placeholder:"Category",name:"category_id",value:this.state.category_id,onChange:this.changeHandler},p.a.createElement("option",null,"Select Category..."),this.state.categ.map((function(e){return p.a.createElement("option",{key:e._id,value:e._id},e.catName)}))))),p.a.createElement(E.a,{lg:"6",md:"6"},p.a.createElement(v.a,null,p.a.createElement(_.a,null,"Description"),p.a.createElement(C.a,{type:"textarea",placeholder:"Description",name:"desc",value:this.state.desc,onChange:this.changeHandler}))),p.a.createElement(E.a,{lg:"6",md:"6"},p.a.createElement(v.a,null,p.a.createElement(_.a,null,"Long Description"),p.a.createElement(k.Editor,{required:!0,toolbarClassName:"demo-toolbar-absolute",wrapperClassName:"demo-wrapper",editorClassName:"demo-editor",editorState:this.state.editorState,onEditorStateChange:this.onEditorStateChange,toolbar:{options:["inline","blockType","fontSize","fontFamily"],inline:{options:["bold","italic","underline","strikethrough","monospace"],bold:{className:"bordered-option-classname"},italic:{className:"bordered-option-classname"},underline:{className:"bordered-option-classname"},strikethrough:{className:"bordered-option-classname"},code:{className:"bordered-option-classname"}},blockType:{className:"bordered-option-classname"},fontSize:{className:"bordered-option-classname"},fontFamily:{className:"bordered-option-classname"}}}))),p.a.createElement(E.a,{lg:"6",md:"6"},p.a.createElement(v.a,null,p.a.createElement(_.a,null,"Course Image"),p.a.createElement(S.a,{type:"file",onChange:this.onChangeHandler})))),p.a.createElement(g.a,null,p.a.createElement(f.a.Ripple,{color:"primary",type:"submit",className:"ml-2 mb-1"},"Update"))))))}}]),a}(m.Component);t.default=D},932:function(e,t,a){}}]);
//# sourceMappingURL=164.5dcd6dc3.chunk.js.map